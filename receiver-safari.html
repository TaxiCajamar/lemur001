<!DOCTYPE html>
<html>
<head>
    <title>Web Audio API - Simples</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        button { padding: 10px; margin: 5px; }
    </style>
</head>
<body>
    <button onclick="iniciarAudio()">Iniciar Áudio</button>
    <button onclick="volumeBaixo()">Volume 10%</button>
    <button onclick="volumeAlto()">Volume 80%</button>

    <script>
        let audioContext, gainNode, source;

        async function iniciarAudio() {
            // 1. Criar o contexto de áudio (o "motor" do áudio)
            audioContext = new AudioContext();
            
            // 2. Carregar o arquivo MP3
            const resposta = await fetch('assets/audio/keyboard.mp3');
            const buffer = await resposta.arrayBuffer();
            const audioBuffer = await audioContext.decodeAudioData(buffer);
            
            // 3. Criar a fonte (o "tocador" de áudio)
            source = audioContext.createBufferSource();
            source.buffer = audioBuffer;
            source.loop = true; // repetir continuamente
            
            // 4. Criar o controle de volume
            gainNode = audioContext.createGain();
            
            // 5. Conectar: Fonte → Volume → Auto-falantes
            source.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            // 6. Iniciar e configurar volume inicial 10%
            source.start();
            gainNode.gain.value = 0.1; // 10%
        }

        function volumeBaixo() {
            if (gainNode) gainNode.gain.value = 0.1; // 10%
        }

        function volumeAlto() {
            if (gainNode) gainNode.gain.value = 0.8; // 80%
        }
    </script>
</body>
</html>
