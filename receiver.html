<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lemur Chat & TraduÃ§Ã£o</title>

  <link rel="stylesheet" href="mobile-style.css" />
  
  <style>
    /* Estilos especÃ­ficos para modo chat apenas */
    .box-principal {
      background-color: #aee2ff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      position: relative;
    }
    
    /* Esconder elementos nÃ£o usados no modo chat */
    .video-wrapper, .camera-toggle-btn, .pip-local-wrapper,
    .logo, .ponte, .instruction-box, .translator-label,
    .botao-key, .social-links-fixed, .info-overlay {
      display: none !important;
    }

    /* ğŸ—‘ï¸ REMOVER ALTO-FALANTE DO LAYOUT */
    #speakerButton {
      display: none !important;
    }
  </style>
</head>

<body>

  <div class="box-principal">

    <!-- ============================================= -->
    <!-- APENAS OS ELEMENTOS ESSENCIAIS DO CHAT/TRADUÃ‡ÃƒO -->
    <!-- ============================================= -->

    <!-- ÃREA DE TEXTO TRADUZIDO -->
    <div id="texto-recebido" style="display: none;"></div>

    <!-- BANDEIRAS DE IDIOMA -->
    <div class="remoter-Lang">ğŸ³ï¸</div>
    <div class="local-Lang">ğŸ³ï¸</div>
    <div class="language-flag">ğŸ³ï¸</div>

    <!-- MICROFONE PRINCIPAL -->
    <button class="record-btn" id="recordButton">ğŸ¤</button>
    <!-- A bandeira serÃ¡ inserida automaticamente via JavaScript -->

  </div> <!-- Fim do .box-principal -->

  <!-- ============================================= -->
    <!-- MODAL DE GRAVAÃ‡ÃƒO -->
    <!-- ============================================= -->

    <div class="recording-modal hidden-until-ready" id="recordingModal">
      <div class="recording-indicator">
        <div class="recording-dot"></div>
        <div class="recording-text">â— Gravando</div>
        <div class="recording-timer" id="recordingTimer">0:00</div>
      </div>
      <button class="send-button" id="sendButton">ğŸ“¤ Enviar</button>
    </div>

  <!-- ============================================= -->
  <!-- SCRIPTS DE INICIALIZAÃ‡ÃƒO OTIMIZADOS -->
  <!-- ============================================= -->

  <script>
    // ConfiguraÃ§Ã£o mÃ­nima para modo chat puro
    window.chatConfig = {
      autoTranslate: true,
      autoSpeak: true,
      sourceLang: 'pt',
      targetLang: 'en'
    };

    // ConfiguraÃ§Ãµes que o receiver-trz.js espera (MÃNIMAS)
    window.meuIdiomaLocal = 'pt-BR';
    window.meuIdiomaRemoto = 'en';
    
    // Mock SIMPLIFICADO do rtcCore - apenas para chat
    window.rtcCore = {
      dataChannel: {
        readyState: 'open',
        send: function(text) {
          console.log('ğŸ’¬ Mensagem do Chat:', text);
          // Simula eco da mensagem (para teste)
          setTimeout(() => {
            if (document.getElementById('texto-recebido')) {
              document.getElementById('texto-recebido').textContent = `Echo: ${text}`;
              document.getElementById('texto-recebido').style.display = 'block';
            }
          }, 1500);
        }
      }
    };

    document.addEventListener('DOMContentLoaded', function () {
      console.log('ğŸ’¬ Chat & TraduÃ§Ã£o - Sistema Limpo Iniciado');
      
      // Mostrar Ã¡rea de texto apÃ³s carregamento
      setTimeout(() => {
        const textoElement = document.getElementById('texto-recebido');
        if (textoElement) {
          textoElement.textContent = 'Sistema de Chat ativo. Clique no microfone para falar.';
          textoElement.style.display = 'block';
        }
        
        // Atualizar bandeiras
        document.querySelector('.remoter-Lang').textContent = 'ğŸ‡ºğŸ‡¸';
        document.querySelector('.local-Lang').textContent = 'ğŸ‡§ğŸ‡·';
        // .language-flag serÃ¡ atualizado automaticamente pelo JavaScript
      }, 1000);
    });

    // FunÃ§Ã£o para teste direto via console
    window.testarChat = function(mensagem) {
      const textoElement = document.getElementById('texto-recebido');
      if (textoElement) {
        textoElement.textContent = mensagem;
        textoElement.style.display = 'block';
      }
    };
  </script>
</body>
</html>
